CREATE SEQUENCE CATECODE_SEQ
  START WITH 1
  INCREMENT BY 1 MAXVALUE 5000 NOCYCLE;

CREATE SEQUENCE VALUECODE_SEQ
  START WITH 1
  INCREMENT BY 1 MAXVALUE 5000 NOCYCLE;

CREATE SEQUENCE MENU_SEQ
  START WITH 1
  INCREMENT BY 1 MAXVALUE 5000 NOCYCLE;
  

CREATE SEQUENCE RESTAURANT_SEQ
  START WITH 1
  INCREMENT BY 1 MAXVALUE 5000 NOCYCLE;

CREATE SEQUENCE RESTCATECODE_SEQ
  START WITH 1
  INCREMENT BY 1 MAXVALUE 5000 NOCYCLE;

CREATE SEQUENCE MENU2RESTAURANT_SEQ
  START WITH 1
  INCREMENT BY 1 MAXVALUE 999999 NOCYCLE;


CREATE SEQUENCE MENUDATA_SEQ
  START WITH 1
  INCREMENT BY 1 MAXVALUE 999999 NOCYCLE;


INSERT INTO CATECODE (CATE_ID, NAME) VALUES (CATECODE_SEQ.NEXTVAL, '어울리는날씨');
INSERT INTO CATECODE (CATE_ID, NAME) VALUES (CATECODE_SEQ.NEXTVAL, '식당분류');
INSERT INTO CATECODE (CATE_ID, NAME) VALUES (CATECODE_SEQ.NEXTVAL, '메뉴분류');
INSERT INTO CATECODE (CATE_ID, NAME) VALUES (CATECODE_SEQ.NEXTVAL, '특별한날');
INSERT INTO CATECODE (CATE_ID, NAME) VALUES (CATECODE_SEQ.NEXTVAL, '컨디션');
INSERT INTO CATECODE (CATE_ID, NAME) VALUES (CATECODE_SEQ.NEXTVAL, '거리');
INSERT INTO CATECODE (CATE_ID, NAME) VALUES (CATECODE_SEQ.NEXTVAL, '주관적특징');

INSERT INTO VALUECODE (VALUE_ID, VALUE) VALUES (VALUECODE_SEQ.NEXTVAL, '비오는날');
INSERT INTO VALUECODE (VALUE_ID, VALUE) VALUES (VALUECODE_SEQ.NEXTVAL, '눈오는날');
INSERT INTO VALUECODE (VALUE_ID, VALUE) VALUES (VALUECODE_SEQ.NEXTVAL, '더운날');
INSERT INTO VALUECODE (VALUE_ID, VALUE) VALUES (VALUECODE_SEQ.NEXTVAL, '추운날');
INSERT INTO VALUECODE (VALUE_ID, VALUE) VALUES (VALUECODE_SEQ.NEXTVAL, '맑은날');
INSERT INTO VALUECODE (VALUE_ID, VALUE) VALUES (VALUECODE_SEQ.NEXTVAL, '복날');
INSERT INTO VALUECODE (VALUE_ID, VALUE) VALUES (VALUECODE_SEQ.NEXTVAL, '해장필요');
INSERT INTO VALUECODE (VALUE_ID, VALUE) VALUES (VALUECODE_SEQ.NEXTVAL, '보양식');
INSERT INTO VALUECODE (VALUE_ID, VALUE) VALUES (VALUECODE_SEQ.NEXTVAL, '가까운데');
INSERT INTO VALUECODE (VALUE_ID, VALUE) VALUES (VALUECODE_SEQ.NEXTVAL, '아무데나');

SELECT * FROM VALUECODE;

INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '구내식당밥');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '김치찌개');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '된장찌개');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '청국장');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '칼국수');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '냉면');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '라멘');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '삼겹살');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '쪽갈비');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '닭갈비');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '육개장');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '돈까스');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '커리');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '부대찌개');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '짜장면');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '짬뽕');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '탕수육');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '석갈비');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '햄버거');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '파전');
INSERT INTO MENU (ID, NAME) VALUES (MENU_SEQ.NEXTVAL, '치킨');


INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '구내식당');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '고기집');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '횟집');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '중국집');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '한식집');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '김밥천국');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '이탈리안레스토랑');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '인도음식점');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '일식집');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '돈까스집');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '짬뽕전문점');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '패스트푸드');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '패밀리레스토랑');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '일반식당');
INSERT INTO RESTCATECODE (ID, NAME) VALUES (RESTCATECODE_SEQ.NEXTVAL, '치킨집');

SELECT * FROM RESTCATECODE;

INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '해수연', '', '', 1);
INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '우진식당', '', '', 1);
INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '한빛식당', '', '', 1);
INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '우리푸드', '', '', 1);
INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '리원', '', '', 4);
INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '인디(Indy)', '', '', 8);
INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '이비가짬뽕', '', '', 11);
INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '병규돈까스', '', '', 10);
INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '버거킹', '', '', 12);
INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '써브웨이', '', '', 12);
INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '강호동치킨', '', '', 15);
INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '다사랑', '', '', 15);
/* 구내식당 제외한 모든 음식점은 일반 음식점에도 포함 */

INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '5.5닭갈비', '', '', 14);
INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '청주본가(구 배불뚝집)', '', '', 14);
INSERT INTO RESTAURANT (ID, NAME, ADDR, CONTACT, CATE_ID) VALUES (RESTAURANT_SEQ.NEXTVAL, '띠울', '', '', 14);



SELECT * FROM RESTAURANT;

SELECT * FROM MENU;


1	해수연			1
2	우진식당			1
3	한빛식당			1
4	우리푸드			1
5	리원			4
6	인디(Indy)			8
7	써브웨이			12
8	버거킹			12
9	이비가짬뽕			11
10	병규돈까스			10
11	5.5닭갈비			14
12	청주본가(구 배불뚝집)			14
13	띠울			14

/* 구내식당 매핑 */
INSERT INTO MENU2RESTAURANT (ID, MENU_ID, RESTAURANT_ID) VALUES (MENU2RESTAURANT_SEQ.NEXTVAL, 1, 1);
INSERT INTO MENU2RESTAURANT (ID, MENU_ID, RESTAURANT_ID) VALUES (MENU2RESTAURANT_SEQ.NEXTVAL, 1, 2);
INSERT INTO MENU2RESTAURANT (ID, MENU_ID, RESTAURANT_ID) VALUES (MENU2RESTAURANT_SEQ.NEXTVAL, 1, 3);
INSERT INTO MENU2RESTAURANT (ID, MENU_ID, RESTAURANT_ID) VALUES (MENU2RESTAURANT_SEQ.NEXTVAL, 1, 4);

/* 나머지 */
INSERT INTO MENU2RESTAURANT (ID, MENU_ID, RESTAURANT_ID) VALUES (MENU2RESTAURANT_SEQ.NEXTVAL, 12, 10); -- 돈까스 - 병규돈가스
INSERT INTO MENU2RESTAURANT (ID, MENU_ID, RESTAURANT_ID) VALUES (MENU2RESTAURANT_SEQ.NEXTVAL, 13, 8); -- 커리 - 인디
INSERT INTO MENU2RESTAURANT (ID, MENU_ID, RESTAURANT_ID) VALUES (MENU2RESTAURANT_SEQ.NEXTVAL, 10, 11); -- 닭갈비 - 5.5

INSERT INTO MENU2RESTAURANT (ID, MENU_ID, RESTAURANT_ID) VALUES (MENU2RESTAURANT_SEQ.NEXTVAL, 15, 5); -- 탕수육 - 리원
INSERT INTO MENU2RESTAURANT (ID, MENU_ID, RESTAURANT_ID) VALUES (MENU2RESTAURANT_SEQ.NEXTVAL, 16, 5); -- 짜장면 - 리원
INSERT INTO MENU2RESTAURANT (ID, MENU_ID, RESTAURANT_ID) VALUES (MENU2RESTAURANT_SEQ.NEXTVAL, 17, 5); -- 짬뽕 - 리원

INSERT INTO MENU2RESTAURANT (ID, MENU_ID, RESTAURANT_ID) VALUES (MENU2RESTAURANT_SEQ.NEXTVAL, 17, 11); -- 짬뽕 - 이비가

INSERT INTO MENU2RESTAURANT (ID, MENU_ID, RESTAURANT_ID) VALUES (MENU2RESTAURANT_SEQ.NEXTVAL, 19, 12); -- 햄버거 - 버거킹


SELECT * FROM MENU;

SELECT * FROM CATECODE; 
1	특별한날
2	어울리는날씨
3	식당분류
4	메뉴분류
5	컨디션
6	거리
7	주관적특징

SELECT * FROM VALUECODE;
1	비오는날
2	눈오는날
3	더운날
4	추운날
5	맑은날
6	가까운데
7	아무데나
8	복날
9	해장필요
10 보양식

-- 거리
INSERT INTO MENUDATA (ID, MENU_ID, CATE_ID, VALUE_ID) VALUES (MENUDATA_SEQ.NEXTVAL, 1, 6, 6); -- 거리가(6) 가까운(3) 구내식당밥(1)

-- 날씨
INSERT INTO MENUDATA (ID, MENU_ID, CATE_ID, VALUE_ID) VALUES (MENUDATA_SEQ.NEXTVAL, 6, 2, 3);   -- 날씨가(2) 더운날(3) 냉면(6)
INSERT INTO MENUDATA (ID, MENU_ID, CATE_ID, VALUE_ID) VALUES (MENUDATA_SEQ.NEXTVAL, 20, 2, 1);  -- 날씨가(2) 비오는날(1) 파전(20)

-- 컨디션
INSERT INTO MENUDATA (ID, MENU_ID, CATE_ID, VALUE_ID) VALUES (MENUDATA_SEQ.NEXTVAL, 17, 5, 9);

SELECT * FROM MENUDATA D, VALUECODE VAL,
              CATECODE CATE, MENU M, MENU2RESTAURANT M2R, RESTAURANT R
WHERE D.VALUE_ID = VAL.VALUE_ID
AND D.CATE_ID = CATE.CATE_ID
AND D.MENU_ID = M.ID
AND M.ID = M2R.MENU_ID
AND M2R.RESTAURANT_ID = R.ID
;

SELECT * FROM RESTAURANT
WHERE ID IN (
SELECT * FROM MENU2RESTAURANT M2R , MENU M
WHERE M2R.MENU_ID = M.ID
)
;

-- 11
DELETE FROM MENU2RESTAURANT
WHERE ID = 21;

UPDATE MENU2RESTAURANT
SET MENU_ID = 10
WHERE ID = 21
;

commit;

		SELECT 
			r.id as id,
			r.name as name,
			r.addr as addr,
			r.contact as contact,
			(select name from restcatecode where id = r.cate_id) cateName
		FROM 
			restaurant r,
			restcatecode rcate
		WHERE
			r.cate_id = rcate.id
		AND rcate.id = 1;